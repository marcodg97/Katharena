$link(A, 20.0.0.0/24)
$link(B, 30.2.0.0/24)
$link(C, 30.1.0.0/24)
$link(D, 100.2.0.0/24)
$link(E, 100.3.0.0/24)
$link(F, 100.1.0.0/24)
$link(G, 100.4.0.0/24)
$link(H, 30.0.0.0/24)
$link(I, 10.0.0.0/24)

$router(as10r1, H, 30.0.0.10|eth0)
$router(as10r1, I, 10.0.0.1|eth1)
$bgp(as10r1, 10, 10.0.0.0/16, 30.0.0.0/24)

$router(as20r1, A, 20.0.0.21|eth0)
$rip(as20r1, 20.0.0.0/16)

$router(as20r2, B, 30.2.0.20|eth0)
$router(as20r2, C, 30.1.0.20|eth1)
$router(as20r2, A, 20.0.0.20|eth2)
$rip(as20r2, 20.0.0.0/16)
$bgp(as20r2, 20, 20.0.0.0/16, 30.1.0.0/24, 30.2.0.0/24)
$bgp_preference(as20r2, 30.1.0.2)

$router(as100r1, G, 100.4.0.1|eth0)
$router(as100r1, F, 100.1.0.1|eth1)
$router(as100r1, H, 30.0.0.1|eth2)
$router(as100r1, 1.1.1.1/24|lo:1)
$ospf(as100r1, 100.0.0.0/8)
$ospf_cost(as100r1, eth0, 50)
$bgp(as100r1, 100, 100.0.0.0/8, 30.0.0.0/24)

$router(as100r2, C, 30.1.0.2|eth0)
$router(as100r2, E, 100.3.0.2|eth1)
$router(as100r2, G, 100.4.0.2|eth2)
$router(as100r2, 2.2.2.2/24|lo:1)
$ospf(as100r2, 100.0.0.0/8)
$ospf_cost(as100r2, eth2, 50)
$bgp(as100r2, 100, 100.0.0.0/8, 30.1.0.0/24)

$router(as100r3, D, 100.2.0.3|eth0)
$router(as100r3, F, 100.1.0.3|eth1)
$ospf(as100r3, 100.0.0.0/8)

$router(as100r4, B, 30.2.0.4|eth0)
$router(as100r4, D, 100.2.0.4|eth1)
$router(as100r4, E, 100.3.0.4|eth2)
$router(as100r4, 4.4.4.4/24|lo:1)
$ospf(as100r4, 100.0.0.0/8)
$bgp(as100r4, 100, 100.0.0.0/8, 30.2.0.0/24)

